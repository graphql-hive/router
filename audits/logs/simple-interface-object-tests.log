TAP version 13
# Using gateway at     http://localhost:4000/graphql
# Fetching tests from  http://localhost:4200/simple-interface-object/tests
# Subtest: simple-interface-object
    # Subtest: simple-interface-object_0
    ok 1 - simple-interface-object_0
      ---
      duration_ms: 30.669838
      type: 'test'
      ...
    # Subtest: simple-interface-object_1
    not ok 2 - simple-interface-object_1
      ---
      duration_ms: 22.959691
      type: 'test'
      location: '/home/ardatan/Guild/query-planner-rs/audits/node_modules/graphql-federation-gateway-audit/dist/test.js:29:9'
      failureType: 'testCodeFailure'
      error: |-
        Test failed for query
        
              query {
                users {
                  id
                  name
                  username
                }
              }
            
        [32m- Expected[39m
        [31m+ Received[39m
        
        [2m  Object {[22m
        [2m    "data": Object {[22m
        [2m      "users": Array [[22m
        [2m        Object {[22m
        [2m          "id": "u1",[22m
        [2m          "name": "u1-name",[22m
        [32m-         "username": "u1-username",[39m
        [31m+         "username": null,[39m
        [2m        },[22m
        [2m        Object {[22m
        [2m          "id": "u2",[22m
        [2m          "name": "u2-name",[22m
        [32m-         "username": "u2-username",[39m
        [31m+         "username": null,[39m
        [2m        },[22m
        [2m      ],[22m
        [2m    },[22m
        [2m    "errors": null,[22m
        [2m  }[22m
        [32m+ actual[39m [31m- expected[39m
        
        [39m  {
        [39m    data: {
        [39m      users: [
        [39m        {
        [39m          id: 'u1',
        [39m          name: 'u1-name',
        [32m+[39m         username: null
        [31m-[39m         username: 'u1-username'
        [39m        },
        [39m        {
        [39m          id: 'u2',
        [39m          name: 'u2-name',
        [32m+[39m         username: null
        [31m-[39m         username: 'u2-username'
        [39m        }
        [39m      ]
        [39m    },
        [39m    errors: null
        [39m  }
        
      code: 'ERR_ASSERTION'
      name: 'AssertionError'
      expected:
        data:
          users:
            0:
              id: 'u1'
              name: 'u1-name'
              username: 'u1-username'
            1:
              id: 'u2'
              name: 'u2-name'
              username: 'u2-username'
        errors: ~
      actual:
        data:
          users:
            0:
              id: 'u1'
              name: 'u1-name'
              username: ~
            1:
              id: 'u2'
              name: 'u2-name'
              username: ~
        errors: ~
      operator: 'deepStrictEqual'
      stack: |-
        TestContext.<anonymous> (file:///home/ardatan/Guild/query-planner-rs/audits/node_modules/graphql-federation-gateway-audit/dist/test.js:45:21)
        process.processTicksAndRejections (node:internal/process/task_queues:105:5)
        async Test.run (node:internal/test_runner/test:1069:7)
        async Suite.processPendingSubtests (node:internal/test_runner/test:752:7)
      ...
    # Subtest: simple-interface-object_2
    not ok 3 - simple-interface-object_2
      ---
      duration_ms: 10.534311
      type: 'test'
      location: '/home/ardatan/Guild/query-planner-rs/audits/node_modules/graphql-federation-gateway-audit/dist/test.js:29:9'
      failureType: 'testCodeFailure'
      error: |-
        Test failed for query
        
              query {
                anotherUsers {
                  ... on User {
                    age
                  }
                }
              }
            
        [32m- Expected[39m
        [31m+ Received[39m
        
        [2m  Object {[22m
        [2m    "data": Object {[22m
        [2m      "anotherUsers": Array [[22m
        [32m-       Object {[39m
        [32m-         "age": 11,[39m
        [32m-       },[39m
        [32m-       Object {[39m
        [32m-         "age": 22,[39m
        [32m-       },[39m
        [31m+       Object {},[39m
        [31m+       Object {},[39m
        [2m      ],[22m
        [2m    },[22m
        [2m    "errors": null,[22m
        [2m  }[22m
        [32m+ actual[39m [31m- expected[39m
        
        [39m  {
        [39m    data: {
        [39m      anotherUsers: [
        [32m+[39m       {},
        [32m+[39m       {}
        [31m-[39m       {
        [31m-[39m         age: 11
        [31m-[39m       },
        [31m-[39m       {
        [31m-[39m         age: 22
        [31m-[39m       }
        [39m      ]
        [39m    },
        [39m    errors: null
        [39m  }
        
      code: 'ERR_ASSERTION'
      name: 'AssertionError'
      expected:
        data:
          anotherUsers:
            0:
              age: 11
            1:
              age: 22
        errors: ~
      actual:
        data:
          anotherUsers:
            0:
            1:
        errors: ~
      operator: 'deepStrictEqual'
      stack: |-
        TestContext.<anonymous> (file:///home/ardatan/Guild/query-planner-rs/audits/node_modules/graphql-federation-gateway-audit/dist/test.js:45:21)
        process.processTicksAndRejections (node:internal/process/task_queues:105:5)
        async Test.run (node:internal/test_runner/test:1069:7)
        async Suite.processPendingSubtests (node:internal/test_runner/test:752:7)
      ...
    # Subtest: simple-interface-object_3
    ok 4 - simple-interface-object_3
      ---
      duration_ms: 7.499023
      type: 'test'
      ...
    # Subtest: simple-interface-object_4
    not ok 5 - simple-interface-object_4
      ---
      duration_ms: 13.352235
      type: 'test'
      location: '/home/ardatan/Guild/query-planner-rs/audits/node_modules/graphql-federation-gateway-audit/dist/test.js:29:9'
      failureType: 'testCodeFailure'
      error: |-
        Test failed for query
        
              query {
                anotherUsers {
                  ... on User {
                    age
                    id
                    name
                    username
                  }
                  id
                  name
                }
              }
            
        [32m- Expected[39m
        [31m+ Received[39m
        
        [2m  Object {[22m
        [2m    "data": Object {[22m
        [2m      "anotherUsers": Array [[22m
        [2m        Object {[22m
        [32m-         "age": 11,[39m
        [2m          "id": "u1",[22m
        [2m          "name": "u1-name",[22m
        [32m-         "username": "u1-username",[39m
        [2m        },[22m
        [2m        Object {[22m
        [32m-         "age": 22,[39m
        [2m          "id": "u2",[22m
        [2m          "name": "u2-name",[22m
        [32m-         "username": "u2-username",[39m
        [2m        },[22m
        [2m      ],[22m
        [2m    },[22m
        [2m    "errors": null,[22m
        [2m  }[22m
        [32m+ actual[39m [31m- expected[39m
        
        [39m  {
        [39m    data: {
        [39m      anotherUsers: [
        [39m        {
        [31m-[39m         age: 11,
        [39m          id: 'u1',
        [39m          name: 'u1-name',
        [31m-[39m         username: 'u1-username'
        [39m        },
        [39m        {
        [31m-[39m         age: 22,
        [39m          id: 'u2',
        [39m          name: 'u2-name',
        [31m-[39m         username: 'u2-username'
        [39m        }
        [39m      ]
        [39m    },
        [39m    errors: null
        [39m  }
        
      code: 'ERR_ASSERTION'
      name: 'AssertionError'
      expected:
        data:
          anotherUsers:
            0:
              age: 11
              id: 'u1'
              name: 'u1-name'
              username: 'u1-username'
            1:
              age: 22
              id: 'u2'
              name: 'u2-name'
              username: 'u2-username'
        errors: ~
      actual:
        data:
          anotherUsers:
            0:
              id: 'u1'
              name: 'u1-name'
            1:
              id: 'u2'
              name: 'u2-name'
        errors: ~
      operator: 'deepStrictEqual'
      stack: |-
        TestContext.<anonymous> (file:///home/ardatan/Guild/query-planner-rs/audits/node_modules/graphql-federation-gateway-audit/dist/test.js:45:21)
        process.processTicksAndRejections (node:internal/process/task_queues:105:5)
        async Test.run (node:internal/test_runner/test:1069:7)
        async Suite.processPendingSubtests (node:internal/test_runner/test:752:7)
      ...
    # Subtest: simple-interface-object_5
    not ok 6 - simple-interface-object_5
      ---
      duration_ms: 7.08648
      type: 'test'
      location: '/home/ardatan/Guild/query-planner-rs/audits/node_modules/graphql-federation-gateway-audit/dist/test.js:29:9'
      failureType: 'testCodeFailure'
      error: |-
        Test failed for query
        
              query {
                users {
                  ... on User {
                    age
                    id
                    name
                    username
                  }
                  id
                  name
                }
              }
            
        [32m- Expected[39m
        [31m+ Received[39m
        
        [2m  Object {[22m
        [32m-   "data": Object {[39m
        [32m-     "users": Array [[39m
        [32m-       Object {[39m
        [32m-         "age": 11,[39m
        [32m-         "id": "u1",[39m
        [32m-         "name": "u1-name",[39m
        [32m-         "username": "u1-username",[39m
        [32m-       },[39m
        [32m-       Object {[39m
        [32m-         "age": 22,[39m
        [32m-         "id": "u2",[39m
        [32m-         "name": "u2-name",[39m
        [32m-         "username": "u2-username",[39m
        [32m-       },[39m
        [32m-     ],[39m
        [32m-   },[39m
        [31m+   "data": null,[39m
        [2m    "errors": null,[22m
        [2m  }[22m
        [32m+ actual[39m [31m- expected[39m
        
        [39m  {
        [32m+[39m   data: null,
        [31m-[39m   data: {
        [31m-[39m     users: [
        [31m-[39m       {
        [31m-[39m         age: 11,
        [31m-[39m         id: 'u1',
        [31m-[39m         name: 'u1-name',
        [31m-[39m         username: 'u1-username'
        [31m-[39m       },
        [31m-[39m       {
        [31m-[39m         age: 22,
        [31m-[39m         id: 'u2',
        [31m-[39m         name: 'u2-name',
        [31m-[39m         username: 'u2-username'
        [31m-[39m       }
        [31m-[39m     ]
        [31m-[39m   },
        [39m    errors: null
        [39m  }
        
      code: 'ERR_ASSERTION'
      name: 'AssertionError'
      expected:
        data:
          users:
            0:
              age: 11
              id: 'u1'
              name: 'u1-name'
              username: 'u1-username'
            1:
              age: 22
              id: 'u2'
              name: 'u2-name'
              username: 'u2-username'
        errors: ~
      actual:
        data: ~
        errors: ~
      operator: 'deepStrictEqual'
      stack: |-
        TestContext.<anonymous> (file:///home/ardatan/Guild/query-planner-rs/audits/node_modules/graphql-federation-gateway-audit/dist/test.js:45:21)
        process.processTicksAndRejections (node:internal/process/task_queues:105:5)
        async Test.run (node:internal/test_runner/test:1069:7)
        async Suite.processPendingSubtests (node:internal/test_runner/test:752:7)
      ...
    # Subtest: simple-interface-object_6
    not ok 7 - simple-interface-object_6
      ---
      duration_ms: 6.287301
      type: 'test'
      location: '/home/ardatan/Guild/query-planner-rs/audits/node_modules/graphql-federation-gateway-audit/dist/test.js:29:9'
      failureType: 'testCodeFailure'
      error: |-
        Test failed for query
        
              query {
                users {
                  ... on User {
                    age
                    id
                    name
                    username
                  }
                  id
                  name
                }
              }
            
        [32m- Expected[39m
        [31m+ Received[39m
        
        [2m  Object {[22m
        [32m-   "data": Object {[39m
        [32m-     "users": Array [[39m
        [32m-       Object {[39m
        [32m-         "age": 11,[39m
        [32m-         "id": "u1",[39m
        [32m-         "name": "u1-name",[39m
        [32m-         "username": "u1-username",[39m
        [32m-       },[39m
        [32m-       Object {[39m
        [32m-         "age": 22,[39m
        [32m-         "id": "u2",[39m
        [32m-         "name": "u2-name",[39m
        [32m-         "username": "u2-username",[39m
        [32m-       },[39m
        [32m-     ],[39m
        [32m-   },[39m
        [31m+   "data": null,[39m
        [2m    "errors": null,[22m
        [2m  }[22m
        [32m+ actual[39m [31m- expected[39m
        
        [39m  {
        [32m+[39m   data: null,
        [31m-[39m   data: {
        [31m-[39m     users: [
        [31m-[39m       {
        [31m-[39m         age: 11,
        [31m-[39m         id: 'u1',
        [31m-[39m         name: 'u1-name',
        [31m-[39m         username: 'u1-username'
        [31m-[39m       },
        [31m-[39m       {
        [31m-[39m         age: 22,
        [31m-[39m         id: 'u2',
        [31m-[39m         name: 'u2-name',
        [31m-[39m         username: 'u2-username'
        [31m-[39m       }
        [31m-[39m     ]
        [31m-[39m   },
        [39m    errors: null
        [39m  }
        
      code: 'ERR_ASSERTION'
      name: 'AssertionError'
      expected:
        data:
          users:
            0:
              age: 11
              id: 'u1'
              name: 'u1-name'
              username: 'u1-username'
            1:
              age: 22
              id: 'u2'
              name: 'u2-name'
              username: 'u2-username'
        errors: ~
      actual:
        data: ~
        errors: ~
      operator: 'deepStrictEqual'
      stack: |-
        TestContext.<anonymous> (file:///home/ardatan/Guild/query-planner-rs/audits/node_modules/graphql-federation-gateway-audit/dist/test.js:45:21)
        process.processTicksAndRejections (node:internal/process/task_queues:105:5)
        async Test.run (node:internal/test_runner/test:1069:7)
        async Suite.processPendingSubtests (node:internal/test_runner/test:752:7)
      ...
    # Subtest: simple-interface-object_7
    ok 8 - simple-interface-object_7
      ---
      duration_ms: 10.35319
      type: 'test'
      ...
    # Subtest: simple-interface-object_8
    not ok 9 - simple-interface-object_8
      ---
      duration_ms: 7.886892
      type: 'test'
      location: '/home/ardatan/Guild/query-planner-rs/audits/node_modules/graphql-federation-gateway-audit/dist/test.js:29:9'
      failureType: 'testCodeFailure'
      error: |-
        Test failed for query
        
              query {
                accounts {
                  ... on Admin {
                    name
                  }
                }
              }
            
        [32m- Expected[39m
        [31m+ Received[39m
        
        [2m  Object {[22m
        [2m    "data": Object {[22m
        [2m      "accounts": Array [[22m
        [32m-       Object {[39m
        [32m-         "name": "Alice",[39m
        [32m-       },[39m
        [32m-       Object {[39m
        [32m-         "name": "Bob",[39m
        [32m-       },[39m
        [31m+       Object {},[39m
        [31m+       Object {},[39m
        [2m        Object {},[22m
        [2m      ],[22m
        [2m    },[22m
        [2m    "errors": null,[22m
        [2m  }[22m
        [32m+ actual[39m [31m- expected[39m
        
        [39m  {
        [39m    data: {
        [39m      accounts: [
        [31m-[39m       {
        [31m-[39m         name: 'Alice'
        [31m-[39m       },
        [31m-[39m       {
        [31m-[39m         name: 'Bob'
        [31m-[39m       },
        [39m        {},
        [32m+[39m       {},
        [32m+[39m       {}
        [39m      ]
        [39m    },
        [39m    errors: null
        [39m  }
        
      code: 'ERR_ASSERTION'
      name: 'AssertionError'
      expected:
        data:
          accounts:
            0:
              name: 'Alice'
            1:
              name: 'Bob'
            2:
        errors: ~
      actual:
        data:
          accounts:
            0:
            1:
            2:
        errors: ~
      operator: 'deepStrictEqual'
      stack: |-
        TestContext.<anonymous> (file:///home/ardatan/Guild/query-planner-rs/audits/node_modules/graphql-federation-gateway-audit/dist/test.js:45:21)
        process.processTicksAndRejections (node:internal/process/task_queues:105:5)
        async Test.run (node:internal/test_runner/test:1069:7)
        async Suite.processPendingSubtests (node:internal/test_runner/test:752:7)
      ...
    # Subtest: simple-interface-object_9
    not ok 10 - simple-interface-object_9
      ---
      duration_ms: 12.499091
      type: 'test'
      location: '/home/ardatan/Guild/query-planner-rs/audits/node_modules/graphql-federation-gateway-audit/dist/test.js:29:9'
      failureType: 'testCodeFailure'
      error: |-
        Test failed for query
        
              query {
                accounts {
                  name
                  # NOTE
                  # __typename is not available in the interfaceObject, needs to be resolved indirectly
                  __typename
                }
              }
            
        [32m- Expected[39m
        [31m+ Received[39m
        
        [2m  Object {[22m
        [2m    "data": Object {[22m
        [2m      "accounts": Array [[22m
        [2m        Object {[22m
        [32m-         "__typename": "Admin",[39m
        [31m+         "__typename": "Account",[39m
        [2m          "name": "Alice",[22m
        [2m        },[22m
        [2m        Object {[22m
        [32m-         "__typename": "Admin",[39m
        [31m+         "__typename": "Account",[39m
        [2m          "name": "Bob",[22m
        [2m        },[22m
        [2m        Object {[22m
        [32m-         "__typename": "Regular",[39m
        [31m+         "__typename": "Account",[39m
        [2m          "name": "Charlie",[22m
        [2m        },[22m
        [2m      ],[22m
        [2m    },[22m
        [2m    "errors": null,[22m
        [2m  }[22m
        [32m+ actual[39m [31m- expected[39m
        
        [39m  {
        [39m    data: {
        [39m      accounts: [
        [39m        {
        [32m+[39m         __typename: 'Account',
        [31m-[39m         __typename: 'Admin',
        [39m          name: 'Alice'
        [39m        },
        [39m        {
        [32m+[39m         __typename: 'Account',
        [31m-[39m         __typename: 'Admin',
        [39m          name: 'Bob'
        [39m        },
        [39m        {
        [32m+[39m         __typename: 'Account',
        [31m-[39m         __typename: 'Regular',
        [39m          name: 'Charlie'
        [39m        }
        [39m      ]
        [39m    },
        [39m    errors: null
        
      code: 'ERR_ASSERTION'
      name: 'AssertionError'
      expected:
        data:
          accounts:
            0:
              name: 'Alice'
              __typename: 'Admin'
            1:
              name: 'Bob'
              __typename: 'Admin'
            2:
              name: 'Charlie'
              __typename: 'Regular'
        errors: ~
      actual:
        data:
          accounts:
            0:
              name: 'Alice'
              __typename: 'Account'
            1:
              name: 'Bob'
              __typename: 'Account'
            2:
              name: 'Charlie'
              __typename: 'Account'
        errors: ~
      operator: 'deepStrictEqual'
      stack: |-
        TestContext.<anonymous> (file:///home/ardatan/Guild/query-planner-rs/audits/node_modules/graphql-federation-gateway-audit/dist/test.js:45:21)
        process.processTicksAndRejections (node:internal/process/task_queues:105:5)
        async Test.run (node:internal/test_runner/test:1069:7)
        async Suite.processPendingSubtests (node:internal/test_runner/test:752:7)
      ...
    # Subtest: simple-interface-object_10
    not ok 11 - simple-interface-object_10
      ---
      duration_ms: 7.786789
      type: 'test'
      location: '/home/ardatan/Guild/query-planner-rs/audits/node_modules/graphql-federation-gateway-audit/dist/test.js:29:9'
      failureType: 'testCodeFailure'
      error: |-
        Test failed for query
        
              query {
                accounts {
                  ... on Admin {
                    __typename
                  }
                }
              }
            
        [32m- Expected[39m
        [31m+ Received[39m
        
        [2m  Object {[22m
        [2m    "data": Object {[22m
        [2m      "accounts": Array [[22m
        [32m-       Object {[39m
        [32m-         "__typename": "Admin",[39m
        [32m-       },[39m
        [32m-       Object {[39m
        [32m-         "__typename": "Admin",[39m
        [32m-       },[39m
        [31m+       Object {},[39m
        [31m+       Object {},[39m
        [2m        Object {},[22m
        [2m      ],[22m
        [2m    },[22m
        [2m    "errors": null,[22m
        [2m  }[22m
        [32m+ actual[39m [31m- expected[39m
        
        [39m  {
        [39m    data: {
        [39m      accounts: [
        [31m-[39m       {
        [31m-[39m         __typename: 'Admin'
        [31m-[39m       },
        [31m-[39m       {
        [31m-[39m         __typename: 'Admin'
        [31m-[39m       },
        [39m        {},
        [32m+[39m       {},
        [32m+[39m       {}
        [39m      ]
        [39m    },
        [39m    errors: null
        [39m  }
        
      code: 'ERR_ASSERTION'
      name: 'AssertionError'
      expected:
        data:
          accounts:
            0:
              __typename: 'Admin'
            1:
              __typename: 'Admin'
            2:
        errors: ~
      actual:
        data:
          accounts:
            0:
            1:
            2:
        errors: ~
      operator: 'deepStrictEqual'
      stack: |-
        TestContext.<anonymous> (file:///home/ardatan/Guild/query-planner-rs/audits/node_modules/graphql-federation-gateway-audit/dist/test.js:45:21)
        process.processTicksAndRejections (node:internal/process/task_queues:105:5)
        async Test.run (node:internal/test_runner/test:1069:7)
        async Suite.processPendingSubtests (node:internal/test_runner/test:752:7)
      ...
    # Subtest: simple-interface-object_11
    ok 12 - simple-interface-object_11
      ---
      duration_ms: 19.274074
      type: 'test'
      ...
    # Subtest: simple-interface-object_12
    not ok 13 - simple-interface-object_12
      ---
      duration_ms: 10.444217
      type: 'test'
      location: '/home/ardatan/Guild/query-planner-rs/audits/node_modules/graphql-federation-gateway-audit/dist/test.js:29:9'
      failureType: 'testCodeFailure'
      error: |-
        Test failed for query
        
              query {
                accounts {
                  # NOTE
                  # id is available in the interfaceObject and can be resolved as there's no type condition involved
                  id
                  ... on Admin {
                    isActive
                  }
                }
              }
            
        [32m- Expected[39m
        [31m+ Received[39m
        
        [2m  Object {[22m
        [2m    "data": Object {[22m
        [2m      "accounts": Array [[22m
        [2m        Object {[22m
        [2m          "id": "u1",[22m
        [32m-         "isActive": true,[39m
        [2m        },[22m
        [2m        Object {[22m
        [2m          "id": "u2",[22m
        [32m-         "isActive": true,[39m
        [2m        },[22m
        [2m        Object {[22m
        [2m          "id": "u3",[22m
        [2m        },[22m
        [2m      ],[22m
        [2m    },[22m
        [2m    "errors": null,[22m
        [2m  }[22m
        [32m+ actual[39m [31m- expected[39m
        
        [39m  {
        [39m    data: {
        [39m      accounts: [
        [39m        {
        [39m          id: 'u1',
        [31m-[39m         isActive: true
        [39m        },
        [39m        {
        [39m          id: 'u2',
        [31m-[39m         isActive: true
        [39m        },
        [39m        {
        [39m          id: 'u3'
        [39m        }
        [39m      ]
        
      code: 'ERR_ASSERTION'
      name: 'AssertionError'
      expected:
        data:
          accounts:
            0:
              id: 'u1'
              isActive: true
            1:
              id: 'u2'
              isActive: true
            2:
              id: 'u3'
        errors: ~
      actual:
        data:
          accounts:
            0:
              id: 'u1'
            1:
              id: 'u2'
            2:
              id: 'u3'
        errors: ~
      operator: 'deepStrictEqual'
      stack: |-
        TestContext.<anonymous> (file:///home/ardatan/Guild/query-planner-rs/audits/node_modules/graphql-federation-gateway-audit/dist/test.js:45:21)
        process.processTicksAndRejections (node:internal/process/task_queues:105:5)
        async Test.run (node:internal/test_runner/test:1069:7)
        async Suite.processPendingSubtests (node:internal/test_runner/test:752:7)
      ...
    1..13
not ok 1 - simple-interface-object
  ---
  duration_ms: 168.331348
  type: 'suite'
  location: '/home/ardatan/Guild/query-planner-rs/audits/node_modules/graphql-federation-gateway-audit/dist/test.js:27:1'
  failureType: 'subtestsFailed'
  error: '9 subtests failed'
  code: 'ERR_TEST_FAILURE'
  ...
1..1
# tests 13
# suites 1
# pass 4
# fail 9
# cancelled 0
# skipped 0
# todo 0
# duration_ms 261.377967
